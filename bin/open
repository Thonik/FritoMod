#!/bin/bash
PATH=/bin:/usr/bin:$HOME/bin:$FM_ROOT

source fm-library.sh

make_name $*
make_root
make_path_from_root $name
path_to_file=$path_from_root

function write_test_suite {
    [ -e $1 ] || cat >$1 <<EOF
local Suite=CreateTestSuite("${path_to_file%.*}");

function Suite:TestFoo()
	-- TODO: Write this test.
end;
EOF
}

if echo $path_to_file | grep -q 'tests'; then
    test_file=`basename $name`
    write_test_suite $test_file
    $EDITOR $name $test_file
else
    test_file=tests/$name
    write_test_suite $test_file
    $EDITOR $name $test_file
else
